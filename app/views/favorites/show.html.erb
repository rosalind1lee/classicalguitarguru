<div>
  <div>
    <h1>
      Favorite <%= @the_favorite.piece.title %> details
    </h1>

    <div>
      <div>
        <a href="/favorites">
          Go back
        </a>
      </div>

      <div>
        <a href="/delete_favorite/<%= @the_favorite.id %>">
          Delete favorite
        </a>
      </div>
    </div>

    <dl>
      <dt>
        Piece
      </dt>
      <dd>
        <%= @the_favorite.piece.title %>
      </dd>

      
      <dt>
        Composer
      </dt>
      <dd>
        <% if @the_favorite.piece.composer != nil %>
          <%= @the_favorite.piece.composer.name %>
        <% else %>
          Unknown
        <% end %>
      </dd>

      <!--
      <dt>
        Created at
      </dt>
      <dd>
        <%= time_ago_in_words(@the_favorite.created_at) %> ago
      </dd>

      <dt>
        Updated at
      </dt>
      <dd>
        <%= time_ago_in_words(@the_favorite.updated_at) %> ago
      </dd>
      -->
    </dl>
  </div>
</div>

<hr>


<div>
  <div>
    <h2>
      Edit favorite
    </h2>

    <form action="/modify_favorite/<%= @the_favorite.id %>"  method="post" >
      <div>
        <label for="piece_id_box">
          Piece
        </label>

        <select name="query_piece_id" id="piece_id_box">
          <% @list_of_pieces.each do |a_piece| %>
            <% if a_piece.id == @the_favorite.piece_id%>
              <option value="<%=a_piece.id%>" selected>
            <% else %>
              <option value="<%=a_piece.id%>">
            <% end %>
              <% if a_piece.composer != nil %>
                <%=a_piece.title+" - "+a_piece.composer.name%>
              <% else %>
                <%=a_piece.title+" - "+"Anonymous"%>
              <% end %>
            </option>
          <% end %>
        </select>
      </div>

      <!--
      <div>
        <label for="user_id_box">
          User
        </label>

        <input type="text" id="user_id_box" name="query_user_id" value="<%= @the_favorite.user_id %>">
      </div>
      -->

      <button>
        Update favorite
      </button>
    </form>
  </div>
</div>

<hr>
